# 一、对象切割

在Python中，切片（`[start:end]`）用于从序列（如`list`、`bytearray`、`str`等）中提取部分元素，其切割范围由`start`（起始索引）和`end`（结束索引）决定，遵循“左闭右开”原则：**包含`start`对应的元素，不包含`end`对应的元素**。


### 1. `[:i]`：从开头切到索引`i`之前
- 规则：`start`省略时默认为`0`（序列开头），`end`为`i`，即提取 **索引`0`到`i-1`的元素**。
- 示例：假设序列 `seq = [a, b, c, d]`（索引`0~3`）：
  - `seq[:1]` → 取索引`0` → `[a]`
  - `seq[:2]` → 取索引`0~1` → `[a, b]`
  - `seq[:4]` → 取索引`0~3`（因为序列只有4个元素）→ `[a, b, c, d]`
  - 若`i`大于序列长度（如`seq[:10]`），则取整个序列（不会报错）。


### 2. `[i:]`：从索引`i`切到末尾
- 规则：`end`省略时默认为序列长度（即末尾），`start`为`i`，即提取 **索引`i`到最后一个元素**。
- 示例（同上`seq = [a, b, c, d]`）：
  - `seq[1:]` → 取索引`1~3` → `[b, c, d]`
  - `seq[2:]` → 取索引`2~3` → `[c, d]`
  - `seq[4:]` → 索引`4`超出范围，返回空序列`[]`。


### 3. 带负号的切片：从末尾开始计数
负索引表示“从序列末尾反向计数”：`-1`对应最后一个元素，`-2`对应倒数第二个，以此类推（例如`seq = [a, b, c, d]`中，`-1`是`d`，`-2`是`c`，`-3`是`b`，`-4`是`a`）。


#### （1）`[-i:]`：从倒数第`i`个元素切到末尾
- 规则：`start`为`-i`（倒数第`i`个元素），`end`省略（默认末尾），即提取 **倒数第`i`个元素到最后一个元素**。
- 示例（`seq = [a, b, c, d]`）：
  - `seq[-1:]` → 取倒数第1个（索引`3`）→ `[d]`
  - `seq[-2:]` → 取倒数第2到最后（索引`2~3`）→ `[c, d]`
  - `seq[-4:]` → 取倒数第4到最后（索引`0~3`）→ `[a, b, c, d]`
  - 若`i`大于序列长度（如`seq[-10:]`），则取整个序列。


#### （2）`[:-i]`：从开头切到倒数第`i`个元素之前
- 规则：`start`省略（默认`0`），`end`为`-i`（倒数第`i`个元素），即提取 **索引`0`到“倒数第`i+1`个元素”**。
- 示例（`seq = [a, b, c, d]`）：
  - `seq[:-1]` → 取到倒数第1个元素之前（即索引`0~2`）→ `[a, b, c]`
  - `seq[:-2]` → 取到倒数第2个元素之前（即索引`0~1`）→ `[a, b]`
  - `seq[:-4]` → 取到倒数第4个元素之前（无元素）→ `[]`


### 总结表格（以`seq = [a, b, c, d]`为例）
| 切片写法  | 切割范围（索引） | 结果       |
|-----------|------------------|------------|
| `[:i]`    | `0 ~ i-1`        | `[:2]`→`[a,b]` |
| `[i:]`    | `i ~ 末尾`       | `[2:]`→`[c,d]` |
| `[-i:]`   | `倒数第i个 ~ 末尾` | `[-2:]`→`[c,d]` |
| `[:-i]`   | `0 ~ 倒数第i+1个` | `[:-2]`→`[a,b]` |


理解这些规则后，就能明白之前`inv_shift_rows`中`state[i][-i:] + state[i][:-i]`的逻辑：通过负索引切片实现“循环右移”，例如`i=1`时，`[-1:]`取最后1个元素，`[:-1]`取前面所有元素，拼接后即完成右移1位。

